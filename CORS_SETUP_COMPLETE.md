# ‚úÖ CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!

## üéØ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ:

1. ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –≤ —Å—Ç—Ä–æ–∫–µ 3**
   - –ë—ã–ª–æ: `const cors = require(" cors);`
   - –°—Ç–∞–ª–æ: `const cors = require("cors");`

2. ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–ª–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è CORS**
   - –†–∞–∑–º–µ—â–µ–Ω–∞ –ø–æ—Å–ª–µ `const app = express();` (—Å—Ç—Ä–æ–∫–∞ 11)
   - –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ origins
   - –í–∫–ª—é—á–µ–Ω—ã credentials
   - –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –º–µ—Ç–æ–¥—ã –∏ –∑–∞–≥–æ–ª–æ–≤–∫–∏
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ preflight –∑–∞–ø—Ä–æ—Å–æ–≤

3. ‚úÖ **–°–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω —á–µ—Ä–µ–∑ PM2**
   - –ü—Ä–æ—Ü–µ—Å—Å `vapc` —Ä–∞–±–æ—Ç–∞–µ—Ç (online)
   - –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö

4. ‚úÖ **CORS –ø—Ä–æ–≤–µ—Ä–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç**
   - Preflight –∑–∞–ø—Ä–æ—Å—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
   - –ó–∞–≥–æ–ª–æ–≤–∫–∏ CORS –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ –æ—Ç–≤–µ—Ç–∞—Ö

## üìã –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è CORS:

```javascript
app.use(cors({
  origin: [
    'https://vasinayw.beget.app',
    'https://va-pc.ru',
    'http://localhost:3000',
    'http://127.0.0.1:3000'
  ],
  credentials: true,
  methods: ['GET', 'POST', 'PUT', 'DELETE', 'OPTIONS'],
  allowedHeaders: ['Content-Type', 'Authorization', 'X-Requested-With']
}));

app.options('*', cors());
```

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã:

### –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞:
- PM2 –ø—Ä–æ—Ü–µ—Å—Å: **online**
- –°–∏–Ω—Ç–∞–∫—Å–∏—Å —Ñ–∞–π–ª–∞: **–∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω**
- –õ–æ–≥–∏: **–±–µ–∑ –æ—à–∏–±–æ–∫**

### CORS –∑–∞–≥–æ–ª–æ–≤–∫–∏:
- ‚úÖ `Access-Control-Allow-Origin`
- ‚úÖ `Access-Control-Allow-Credentials`
- ‚úÖ `Access-Control-Allow-Methods`
- ‚úÖ `Access-Control-Allow-Headers`

## üîç –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞:**
   - –û—Ç–∫—Ä—ã—Ç—å `http://localhost:3000` –≤ –±—Ä–∞—É–∑–µ—Ä–µ
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) - –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å CORS –æ—à–∏–±–æ–∫
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Network tab - –∑–∞–ø—Ä–æ—Å—ã –¥–æ–ª–∂–Ω—ã –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —É—Å–ø–µ—à–Ω–æ

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É —Å production –¥–æ–º–µ–Ω–∞:**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `https://vasinayw.beget.app`
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `https://va-pc.ru`

3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
   - –°–ª–µ–¥–∏—Ç—å –∑–∞ –ª–æ–≥–∞–º–∏: `pm2 logs vapc`
   - –ü—Ä–æ–≤–µ—Ä—è—Ç—å —Å—Ç–∞—Ç—É—Å: `pm2 status`

## üìù –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä–≤–µ—Ä–µ:

- **IP:** 45.141.76.200
- **–ü–æ—Ä—Ç:** 8080
- **–ü—Ä–æ—Ü–µ—Å—Å:** PM2 (vapc)
- **–§–∞–π–ª:** `/var/www/server/index.js`
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** `vasinayw_vapc` –Ω–∞ `vasinayw.beget.tech`

## ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ä–∞–±–æ—Ç–µ!

–¢–µ–ø–µ—Ä—å –≤–∞—à —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –º–æ–∂–µ—Ç –¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ –±—ç–∫–µ–Ω–¥—É –±–µ–∑ CORS –æ—à–∏–±–æ–∫!

